<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap cdn -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet" />
    <!-- css file link -->
    <link rel="stylesheet"
        href="{{ url_for('static', filename='css/register_patient.css') }}" />
    <!-- page favicon -->
    <link rel="shortcut icon"
        href="{{ url_for('static', filename='img/favicon.ico') }}" />
    <title>Register a new patient to HealthPixel</title>
</head>

<body class="d-flex flex-column min-vh-100">
    <div class="container flex-grow-1">
        <header
            class="d-flex justify-content-between align-items-center mt-4 mb-3">
            <div class="d-flex">
                <img src="{{ url_for('static', filename='img/healthpixel_logo.png') }}"
                    alt="HealthPixel Logo" class="logo" />
                <h1 class="fw-bold px-4 pt-2">
                    <a href="{{ url_for('healthpixel') }}"
                        class="text-success text-decoration-none">HealthPixel</a>
                </h1>
            </div>
        </header>
        <div class="row justify-content-center">
            <div class="col-sm-8">
                <!-- Display errors -->
                <div id="errors"
                    class="{{ 'show-error' if error_ef or error_pm or err_reg_user else 'hide-error' }}">
                    {% if error_ef %}
                    <p id="error-ef">{{ error_ef }}</p>
                    {% elif error_pm %}
                    <p id="error-pm">{{ error_pm }}</p>
                    {% elif err_reg_user %}
                    <p id="err-reg-user">{{ err_reg_user }}</p>
                    {% endif %}
                </div>
                <form class="d-grid mt-3" method="POST"
                    action="{{ url_for('app_views.register_patient') }}">
                    <div class="row">
                        <h3 class="text-secondary-emphasis mb-3">
                            Medical History
                        </h3>
                        <div class="col-md-6 mb-2">
                            <label for="diagnosis">Diagnosis</label>
                            <input type="text" name="diagnosis"
                                class="form-control" maxlength="255"
                                id="diagnosis" />
                        </div>
                        <div class="col-md-6 mb-2">
                            <label for="dod">Date of Diagnosis</label>
                            <input type="date" name="dod" class="form-control"
                                id="dod" />
                        </div>
                        <div class="col-md-6 mb-2">
                            <label for="status">Status</label>
                            <input type="text" name="status"
                                class="form-control"
                                placeholder="e.g. Ongoing or Managed"
                                maxlength="50" id="status" />
                        </div>
                        <div class="col-md-6 mb-2">
                            <label for="notes">Notes</label>
                            <input type="text" name="notes" class="form-control"
                                id="notes" />
                        </div>
                        <div class="col-md-6 d-grid">
                            <button type="submit"
                                class="btn btn-lg btn-primary mt-3 mb-5">
                                Skip (Not applicable)
                            </button>
                        </div>
                        <div class="col-md-6 d-grid">
                            <button type="submit"
                                class="btn btn-lg btn-success mt-3 mb-5">
                                Next &#8594
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <footer class="text-center text-light py-3">
        <p class="mb-0">&copy HealthPixel 2024</p>
    </footer>
    <script>
        // Function to hide the element after a delay
        function hideElementAfterDelay(elementId, delay) {
            setTimeout(function () {
                var element = document.getElementById(elementId);
                if (element) {
                    element.style.transition = "opacity 1s ease-out";
                    element.style.visibility = "hidden";
                    setTimeout(function () {
                        // element.style.display = "none";
                    }, 1000);
                }
            }, delay);
        }

        hideElementAfterDelay("errors", 3000);
        hideElementAfterDelay("err-reg-user", 3000);
        hideElementAfterDelay("error-ef", 3000);
        hideElementAfterDelay("success-lo", 3000);
        hideElementAfterDelay("del-success", 3000);
    </script>
    <!-- JS Bootstrap cdn -->
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>