<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Bootstrap cdn -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet" />
  <!-- intl-tel-input cdn (for phone numbers) -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
  <!-- css file link -->
  <link rel="stylesheet"
    href="{{ url_for('static', filename='css/register_patient.css') }}" />
  <!-- page favicon -->
  <link rel="shortcut icon"
    href="{{ url_for('static', filename='img/favicon.ico') }}" />
  <title>Register a new patient to HealthPixel</title>
</head>

<body class="d-flex flex-column min-vh-100">
  <div class="container flex-grow-1">
    <header class="d-flex justify-content-between align-items-center mt-4 mb-3">
      <div class="d-flex">
        <img src="{{ url_for('static', filename='img/healthpixel_logo.png') }}"
          alt="HealthPixel Logo" class="logo" />
        <h1 class="fw-bold px-4 pt-2">
          <a href="{{ url_for('healthpixel') }}"
            class="text-success text-decoration-none">HealthPixel</a>
        </h1>
      </div>
    </header>
    <div class="row justify-content-center">
      <div class="col-sm-10">
        <!-- Display errors -->
        {% with messages = get_flashed_messages() %}
          <div
            id="errors"
            class="{{ 'show-error' if messages else 'hide-error' }}"
            role="alert"
          >
            {% if messages %} {{ messages[0] }} {% endif %}
          </div>
        {% endwith %}
        <form class="d-grid mt-3" method="POST"
          action="{{ url_for('app_views.register_patient') }}">
          <div class="row">
            <h3 class="text-secondary-emphasis mb-3">
              Register a new patient
            </h3>
            <div class="col-sm-6 mb-2">
              <label for="first_name">First Name</label>
              <input type="text" name="first_name" class="form-control"
                id="first_name" />
            </div>
            <div class="col-sm-6 mb-2">
              <label for="last_name">Last Name</label>
              <input type="text" name="last_name" class="form-control"
                id="last_name" />
            </div>
            <div class="col-sm-4 mb-2">
              <label for="date_of_birth">Date of Birth</label>
              <input type="date" name="date_of_birth" class="form-control"
                id="date_of_birth" />
            </div>
            <div class="col-sm-4 text-center mb-2">
              <p class="mb-1">Gender</p>
              <input type="radio" name="gender" id="male" value="Male" />
              <label for="male">Male</label>
              <input type="radio" name="gender" id="female" value="Female" />
              <label for="female">Female</label>
            </div>
            <div class="col-sm-4 mb-2">
              <label for="blood_group">Blood Group</label>
              <select id="blood_group" name="blood_group" class="form-select">
                <option value="" disabled selected>
                  Select your blood group
                </option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
              </select>
            </div>
            <div class="col-sm-8 mb-2">
              <label for="address">Address</label>
              <input type="text" name="address" class="form-control"
                id="address" />
            </div>
            <div class="col-sm-4 mb-2">
              <label for="zipcode">Zipcode</label>
              <input type="number" name="zipcode" class="form-control"
                maxlength="6" id="zipcode" />
            </div>
            <div class="col-sm-8 mb-2">
              <label for="email">Contact Email</label>
              <input type="email" name="email" class="form-control"
                placeholder="example@email.com" id="email" />
            </div>
            <div class="col-sm-4 mb-2">
              <label for="phone_number">Phone Number</label>
              <input type="tel" name="phone_number" class="form-control"
                id="phone_number" />
            </div>
            <div class="col-sm-6 mb-2">
              <label for="password">Password</label>
              <input type="password" name="password" class="form-control"
                id="password" minlength="8"/>
            </div>
            <div class="col-sm-6 mb-2">
              <label for="conf_password">Confirm Password</label>
              <input type="password" name="conf_password" class="form-control"
                id="conf_password" minlength="8" />
            </div>
            <div class="col-sm-8 mb-2">
              <label for="emg_contact_name">Emergency Contact Name</label>
              <input type="text" name="emg_contact_name"
                class="form-control phone" id="emg_contact_name" />
            </div>
            <div class="col-sm-4 mb-2">
              <label for="emg_contact_phone">Emergency Contact Phone
                Number</label>
              <input type="tel" name="emg_contact_phone" class="form-control"
                id="emg_contact_phone" />
            </div>
          </div>
          <button type="submit" class="btn btn-lg btn-success mt-3 mb-5">
            Next &#8594
          </button>
      </div>
      </form>
    </div>
  </div>
  </div>
  <footer class="text-center text-light py-3">
    <p class="mb-0">&copy HealthPixel 2024</p>
  </footer>
  <script>
    // Function to hide the element after a delay
    function hideElementAfterDelay(elementId, delay) {
      setTimeout(function () {
        var element = document.getElementById(elementId);
        if (element) {
          element.style.transition = "opacity 1s ease-out";
          element.style.visibility = "hidden";
          setTimeout(function () {
            // element.style.display = "none";
          }, 1000);
        }
      }, delay);
    }

    hideElementAfterDelay("errors", 3000);
    hideElementAfterDelay("err-reg-user", 3000);
    hideElementAfterDelay("error-ef", 3000);
    hideElementAfterDelay("success-lo", 3000);
    hideElementAfterDelay("del-success", 3000);
  </script>

  <!-- For formatted phone numbers -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  <script>
    // Initialize intl-tel-input for the first phone number
    var phoneInput = document.querySelector("#phone_number");
    var itiPhone = window.intlTelInput(phoneInput, {
      initialCountry: "ke", // Set default country (Nigeria in this example)
      separateDialCode: true,
      utilsScript:
        "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });

    // Initialize intl-tel-input for the emergency contact's phone number
    var emergencyPhoneInput = document.querySelector("#emg_contact_phone");
    var itiEmergencyPhone = window.intlTelInput(emergencyPhoneInput, {
      initialCountry: "ng", // Set default country
      separateDialCode: true,
      utilsScript:
        "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>