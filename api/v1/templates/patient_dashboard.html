<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Bootstrap css cdn -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet" />
  <!-- google fonts link -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap"
    rel="stylesheet" />
  <!-- css file link -->
  <link rel="stylesheet"
    href="{{ url_for('static', filename='css/patient_dashboard.css') }}" />
  <!-- page favicon -->
  <link rel="shortcut icon"
    href="{{ url_for('static', filename='img/favicon.ico') }}" />

  <title>HealthPixel Patient Dashboard</title>
</head>

<body class="d-flex flex-column min-vh-100">
  <div class="flex-grow-1">
    <!-- Sidebar -->
    <div class="navbar flex-column justify-content-start sidebar py-2">
      <img src="{{ url_for('static', filename='img/healthpixel_logo.png') }}"
        class="mb-5 mt-4" alt="HealthPixel Logo" />
      <a href="#" class="btn btn-primary py-2 mb-5">Edit profile</a>
      <div class="row">
        <div class="col-md-4 text-center">
          <a href="{{ url_for('auth.logout_patient') }}"
            class="btn btn-outline-danger mb-3">Logout</a>
        </div>
      </div>
    </div>
    <main class="px-4 py-5">
      <div class="container">
        <header class="d-flex text-center">
          <a href="{{ url_for('healthpixel') }}"
            class="text-success fw-bold mb-4 text-decoration-none fs-2">HealthPixel</a>
        </header>
        <!-- Display messages -->
        <div class="message-box">
          {% with messages = get_flashed_messages(with_categories=True) %} {%
          for category, message in messages %}
          <div
            class="{% if message %}show-{{ category }}{% else %}hide-{{ category }}{% endif %}"
            id="msg" role="alert">
            {% if message %} {{ message }} {% endif %}
          </div>
          {% endfor %} {% endwith %}
        </div>
        <!-- Main page content -->
        <div class="card p-3 mb-5 mt-4 custom_card">
          <h1 class="display-6 fw-semibold mb-4">
            Welcome, {{ user.first_name }} {{ user.last_name }}
          </h1>
          <p><b>ID:</b> {{ user.id }}</p>
          <p><b>Email:</b> {{ user.email }}</p>
          <p><b>Phone Number:</b> {{ user.phone_number }}</p>
          <p><b>Gender:</b> {{ user.gender }}</p>
          <p><b>Date of Birth:</b> {{ user.date_of_birth }}</p>
          <p><b>Address:</b> {{ user.address }}</p>
          <p><b>Zipcode:</b> {{ user.zipcode }}</p>
          <p><b>Blood Group:</b> {{ user.blood_group }}</p>
          <p>
            <b>Emergency Contact Name:</b> {{ user.emergency_contact_name }}
          </p>
          <p>
            <b>Emergency Contact Number:</b> {{ user.emergency_contact_phone
            }}
          </p>
        </div>

        <!-- Patient Medication (if any) -->
        <div class="card p-3 mb-5 mt-4 custom_card">
          <h3>Medication</h3>
          {% if medication %}
          <p><b>Medication Name:</b> {{ medication.medication_name }}</p>
          <p><b>Dosage:</b> {{ medication.dosage }}</p>
          <p><b>Frequency:</b> {{ medication.frequency }}</p>
          <p><b>Start Date:</b> {{ medication.start_date.strftime('%Y-%m-%d') if
            medication.start_date else '' }}</p>
          <p><b>End Date:</b> {{ medication.end_date.strftime('%Y-%m-%d') if
            medication.end_date else '' }}</p>

          <p><b>Notes:</b> {{ medication.notes }}</p>
          {% else %}
          <p>Your medications have not been added yet.</p>
          {% endif %}
        </div>
      </div>
    </main>
  </div>
  <footer class="text-center text-light py-3">
    <p class="mb-0">&copy HealthPixel 2024</p>
  </footer>
  <script>
    // Function to hide the element after a delay
    function hideElementAfterDelay(elementId, delay) {
      setTimeout(function () {
        var element = document.getElementById(elementId);
        if (element) {
          element.style.transition = "opacity 1s ease-out";
          element.style.visibility = "hidden";
          setTimeout(function () {
            // element.style.display = "none";
          }, 1000);
        }
      }, delay);
    }

    hideElementAfterDelay("msg", 5000);
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>